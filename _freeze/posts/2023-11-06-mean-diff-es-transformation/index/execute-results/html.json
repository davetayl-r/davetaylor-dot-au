{
  "hash": "d881072981610d114bde6fb8df4ebb19",
  "result": {
    "markdown": "---\ntitle: \"Transforming a reported mean difference into a standardised mean difference\"\ndescription: \"I found a way to wrangle a mean difference between two groups into standardised mean difference, which I thought I'd share as it may just help someone else\"\nauthor:\n  - name: David Taylor\n    url: https://davetaylor.au\n    orcid: 0000-0001-8801-7488\n    affiliation: \"Research Fellow and PhD Candidate, Department of Social Work, Monash University\"\n    affiliation-url: https://www.monash.edu/medicine/spahc/socialwork\ndate: 11-06-2023\ncategories: [Effect Size, Systematic Review, Meta Analysis, R]\ncitation: \n    url: https://davetaylor.au/posts/2023-11-06-mean-diff-es-transformation/ \n    #image: mean-diff-es-transformation-preview-image.png\ndraft: true\n---\n\n\nI'm in the midst of doing a systematic review of housing and support services interventions for homeless youth.\n\nMy go-to effect size calculator is the *`esc`* package.\n\n### Assumptions and Background\n\n1.  **Mean Difference**: You've provided the mean difference between the treatment and comparison groups, which is 23.39.\n2.  **Confidence Interval**: The 95% confidence interval for the mean difference is ($$10.28, 36.5$$).\n3.  **Sample Sizes**: The sample size for the treatment group is ( n_1 = 87 ) and for the comparison group is ( n_2 = 69 ).\n4.  **Pooled Standard Deviation**: This is generally calculated from the raw data, but since we don't have that, we'll need to estimate it.\n\nThe formula for Cohen's *d* is:\n\n$$\nd = \\frac{{\\text{{Mean}}_1 - \\text{{Mean}}_2}}{SD_{\\text{{pooled}}}}\n$$\n\n### Estimating Pooled Standard Deviation\n\nSince we don't have the raw data, we need to estimate the pooled standard deviation (SD~pooled~). One way to do this is by using the confidence interval for the mean difference. The 95% confidence interval for the mean difference is often calculated as:\n\n$$\n\\text{{Mean difference}} \\pm 1.96 \\times SE\n$$\n\nWhere ( SE ) is the standard error of the mean difference. From this, we can rearrange to find ( SE ):\n\n$$\nSE = \\frac{{\\text{{Upper limit}} - \\text{{Lower limit}}}}{2 \\times 1.96}\n$$\n\nThe standard error of the mean difference is related to the pooled standard deviation as follows:\n\n$$\nSE = \\sqrt{\\frac{{SD_1^2}}{n_1} + \\frac{{SD_2^2}}{n_2}} \\approx \\sqrt{\\frac{{SD_{\\text{pooled}}^2}}{n_1} + \\frac{{SD_{\\text{pooled}}^2}}{n_2}} = SD_{\\text{pooled}} \\times \\sqrt{\\frac{1}{n_1} + \\frac{1}{n_2}}\n$$\n\nFrom this, we can solve for (SD~pooled~):\n\n$$\n{SD_{\\text{pooled}}} = \\frac{SE}{\\sqrt{\\frac{1}{n_1} + \\frac{1}{n_2}}}\n$$\n\nFinally, we can plug (SD~pooled~) into the formula for Cohen's *d*.\n\nLet's proceed with the calculations.\n\nThe calculated values are as follows:\n\n-   Standard Error (SE) of the mean difference: (\\~ 6.69 )\n-   Estimated Pooled Standard Deviation (SD~pooled~): (\\~ 41.49 )\n-   Cohen's *d: \\~* 0.564\n\nBased on these calculations, the estimated effect size ( *d* ) is approximately 0.564.\n\n# Introduction\n\nThe confidence interval for Cohen's ( d ) can be estimated using the confidence interval for the mean difference and the estimated pooled standard deviation. In this section, we'll go through the steps to calculate this confidence interval.\n\n# Steps to Calculate Confidence Interval for Cohen's ( d )\n\n## Step 1: Calculate the Standard Error of Cohen's ( d )\n\nThe standard error of Cohen's ( d ) can be calculated using the standard error of the mean difference, ( SE ), and the estimated pooled standard deviation (SD~pooled~).\n\n$$\nSE_d = \\frac{SE}{SD_{\\text{pooled}}}\n$$\n\n## Step 2: Calculate the Confidence Interval for Cohen's ( d )\n\nThe confidence interval can then be calculated using this standard error and the Z-value corresponding to the desired confidence level (e.g., ( Z = 1.96 ) for a 95% confidence level).\n\n$$\n\\text{CI for } d = d \\pm Z \\times SE_d\n$$\n\nHere, ( d ) is the calculated Cohen's ( d ), ( Z ) is the Z-value for the desired confidence level, and ( SE_d ) is the standard error of Cohen's ( d ).\n\n# Results\n\nThe calculated values for the confidence interval of Cohen's d are as follows:\n\n-   Standard Error (( SE_d )) of Cohen's ( d ): (~ 0.161)\n-   95% Confidence Interval for Cohen's ( d ): (~ [0.248, 0.880])\n\nBased on these calculations, the estimated effect size ( d ) of approximately 0.564 falls within a 95% confidence interval of approximately (0.248, 0.880), reinforcing that the effect size is likely to be moderate to possibly large.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n## FUNCTION TO CALCULATE SMD FROM A REPORTED MEAN DIFFERENCE AND 95 PER CENT CONFIDENCE INTERVAL\n\n# The results in the study by Kozloff (2016) are presented as treatment effects (i.e., mean differences and confidence intervals).\n# This function transforms these into a common measure of the standardised mean difference: Cohen's d or Hedge's g\n\n# Function to estimate either Cohen's d or Hedges' g, along with their 95% confidence interval and derived p-value\nesc_mean_difference <- function(mean_difference, mean_diff_se = NULL, mean_diff_ci_lower = NULL, mean_diff_ci_upper = NULL, treatment_n, comparison_n, esc_type) {\n  # Use reported standard error if provided, otherwise calculate standard error from confidence intervals\n  if (!is.null(mean_diff_se)) {\n    standard_error <- mean_diff_se\n  } else if (!is.null(mean_diff_ci_lower) & !is.null(mean_diff_ci_upper)) {\n    standard_error <- (mean_diff_ci_upper - mean_diff_ci_lower) / (2 * 1.96)\n  } else {\n    stop(\"Either mean_diff_se or both mean_diff_ci_lower and mean_diff_ci_upper must be provided.\")\n  }\n  \n  # Estimate the pooled standard deviation using the standard error\n  standard_deviation_pooled <- standard_error / sqrt((1 / treatment_n) + (1 / comparison_n))\n  \n  # Calculate Cohen's d\n  cohens_d <- mean_difference / standard_deviation_pooled\n  \n  # Calculate the standard error for Cohen's d\n  standard_error_d <- standard_error / standard_deviation_pooled\n  \n  # Calculate the confidence interval for Cohen's d (95% confidence level, Z = 1.96)\n  mean_diff_ci_lower_d <- cohens_d - (1.96 * standard_error_d)\n  mean_diff_ci_upper_d <- cohens_d + (1.96 * standard_error_d)\n  \n  # Calculate the t-statistic\n  t_stat <- mean_difference / standard_error\n  \n  # Calculate degrees of freedom\n  df <- treatment_n + comparison_n - 2\n  \n  # Calculate the p-value using the t-distribution\n  p_value <- 2 * (1 - pt(abs(t_stat), df))\n  \n  # Check if Hedges' g is requested\n  if (esc_type == 'g') {\n    # Calculate Hedges' g\n    hedges_g <- cohens_d * (1 - (3 / (4 * (treatment_n + comparison_n) - 9)))\n    return(list(effect_size = hedges_g, conf_interval = c(mean_diff_ci_lower_d, mean_diff_ci_upper_d), p_value = p_value))\n  } else {\n    return(list(effect_size = cohens_d, conf_interval = c(mean_diff_ci_lower_d, mean_diff_ci_upper_d), p_value = p_value))\n  }\n}\n\n# Example usage for Cohen's d using confidence intervals\nresult_d_ci <- esc_mean_difference(\n  mean_difference = 23.39, \n  treatment_n = 87, \n  comparison_n = 69, \n  esc_type = 'd', \n  mean_diff_ci_lower = 10.28, \n  mean_diff_ci_upper = 36.5)\n\n# Example usage for Cohen's d using reported SE\n\nmean_diff_ci_lower <- 10.28\nmean_diff_ci_upper <- 36.5\nmean_diff_se <- (mean_diff_ci_upper - mean_diff_ci_lower) / (2 * 1.96)\n\nresult_d_se <- esc_mean_difference(\n  mean_difference = 23.39, \n  treatment_n = 87, \n  comparison_n = 69, \n  esc_type = 'd', \n  mean_diff_se = mean_diff_se)\n```\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}